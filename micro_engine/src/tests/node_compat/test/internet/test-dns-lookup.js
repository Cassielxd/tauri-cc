// deno-fmt-ignore-file
// deno-lint-ignore-file

// Copyright Joyent and Node contributors. All rights reserved. MIT license.
// Taken from Node 18.12.1
// This file is automatically generated by `tools/node_compat/setup.ts`. Do not modify this file manually.

'use strict';

require('../common');
const common = require('../common');
const dns = require('dns');
const dnsPromises = dns.promises;
const { addresses } = require('../common/internet');
const assert = require('assert');

assert.rejects(
  dnsPromises.lookup(addresses.NOT_FOUND, {
    hints: 0,
    family: 0,
    all: false
  }),
  {
    code: 'ENOTFOUND',
    message: `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`
  }
);

assert.rejects(
  dnsPromises.lookup(addresses.NOT_FOUND, {
    hints: 0,
    family: 0,
    all: true
  }),
  {
    code: 'ENOTFOUND',
    message: `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`
  }
);

dns.lookup(addresses.NOT_FOUND, {
  hints: 0,
  family: 0,
  all: true
}, common.mustCall((error) => {
  assert.strictEqual(error.code, 'ENOTFOUND');
  assert.strictEqual(
    error.message,
    `getaddrinfo ENOTFOUND ${addresses.NOT_FOUND}`
  );
  assert.strictEqual(error.syscall, 'getaddrinfo');
  assert.strictEqual(error.hostname, addresses.NOT_FOUND);
}));

assert.throws(
  () => dnsPromises.lookup(addresses.NOT_FOUND, {
    family: 'ipv4',
    all: 'all'
  }),
  { code: 'ERR_INVALID_ARG_VALUE' }
);
